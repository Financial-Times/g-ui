{%- import "g-ui/analytics" as Analytics -%}
{%- import "g-ui/asset-loader" as AssetLoader -%}
{%- import "g-ui/meta" as Meta -%}
{%- import "g-ui/ads" as Ads -%}

{%- set test_comments_uuid = "3a499586-b2e0-11e4-a058-00144feab7de" if not flags.prod and flags.comments else "" -%}
<!doctype html>
<html lang="en-GB" class="core"
    data-buildtime="{{ now() | isotime }}"
    data-content-id="{{ id if id and id != '$uuid' else test_comments_uuid }}">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
{% block prependhead %}{% endblock -%}
{{ AssetLoader.ResourceHints(resourceHints) }}

<!--[if lt IE 9]><script>/**
* @preserve HTML5 Shiv 3.7.2 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed
*/
!function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=t.elements;return"string"==typeof a?a.split(" "):a}function e(a,b){var c=t.elements;"string"!=typeof c&&(c=c.join(" ")),"string"!=typeof a&&(a=a.join(" ")),t.elements=c+" "+a,j(b)}function f(a){var b=s[a[q]];return b||(b={},r++,a[q]=r,s[r]=b),b}function g(a,c,d){if(c||(c=b),l)return c.createElement(a);d||(d=f(c));var e;return e=d.cache[a]?d.cache[a].cloneNode():p.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!e.canHaveChildren||o.test(a)||e.tagUrn?e:d.frag.appendChild(e)}function h(a,c){if(a||(a=b),l)return a.createDocumentFragment();c=c||f(a);for(var e=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)e.createElement(h[g]);return e}function i(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return t.shivMethods?g(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-:]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(t,b.frag)}function j(a){a||(a=b);var d=f(a);return!t.shivCSS||k||d.hasCSS||(d.hasCSS=!!c(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||i(a,d),a}var k,l,m="3.7.2",n=a.html5||{},o=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,q="_html5shiv",r=0,s={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",k="hidden"in a,l=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){k=!0,l=!0}}();var t={elements:n.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:m,shivCSS:n.shivCSS!==!1,supportsUnknownElements:l,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:j,createElement:g,createDocumentFragment:h,addElements:e};a.html5=t,j(b)}(this,document);
</script><![endif]-->
{{ AssetLoader.ClientsideFlags(flags) }}
<script inline src="g-ui/top.js"></script>

<link inline rel="stylesheet" href="g-ui/critical.css">

{% set defaultStylesheets = [
    "https://origami-build.ft.com/v2/bundles/css?modules=o-grid@^4.2.1",
    "g-ui/main.css",
    "main.css"]
%}
{{ AssetLoader.Stylesheets(defaultStylesheets) }}

{{ AssetLoader.Stylesheets(stylesheets) }}

{{ Meta.Website_JSONLD() }}
{{ Meta.BreadcrumbList_JSONLD([topic]) }}
{{ AssetLoader.oErrors(on=flags.errorReporting) }}

{{ Meta.StandardMetadata(
    url=url,
    title=title | default(headline, true),
    description=description,
    image=mainImage.url) }}

{{ Meta.FacebookOpenGraph(
    url=url,
    title=facebookHeadline | default (socialHeadline) | default(headline, true),
    image=facebookImage | default(socialImage) | default(mainImage.url),
    description=description) }}

{{ Meta.TwitterCard(
    type=twitterCard,
    url=url,
    title=twitterHeadline | default(socialHeadline) | default(headline, true),
    image=twitterImage | default(socialImage) | default(mainImage.url),
    description=description,
    creator=twitterCreator) }}

{%- if flags.analytics %}
  {{ Analytics.SpoorMeta(tracking) }}
{% endif -%}

{{ Ads.ConfigJSON(config=ads, on=flags.ads) }}

{% block appendhead %}{% endblock -%}

</head>
<body>

{{ Ads.SiteHeader(on=flags.ads) }}

{% if flags.analytics %}
{% include "g-ui/analytics" %}
{% endif %}

{{ Analytics.GoogleAnalytics(id=tracking.googleAnalyticsPropertyID, on=flags.googleAnalytics) }}

{% if flags.header %}
  {% include "g-ui/header" %}
{% endif %}

{% block body %}{% endblock %}

{% if flags.footer %}
  {% include "g-ui/footer" %}
{% endif %}


<script async>
queue([
  'main.js',
  'g-ui/index.js',
  'https://origami-build.ft.com/v2/bundles/js?export=oDate&modules=o-date@^2.6.0'
  {% if scripts %}{% for script in scripts %}
  ,'{{ script }}'
  {% endfor %}{% endif %}
]);
</script>

</body>
</html>
